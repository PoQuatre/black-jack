var O=Object.defineProperty;var V=(n,e,t)=>e in n?O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var N=(n,e,t)=>(V(n,typeof e!="symbol"?e+"":e,t),t),j=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var m=(n,e,t)=>(j(n,e,"read from private field"),t?t.call(n):e.get(n)),$=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},R=(n,e,t,i)=>(j(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);import{j as q,r as I,a as l,L as A,u as G,R as J,b as S,c as T,B as F}from"./vendor-b9676509.js";const H=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};H();const K="_img_o1udw_1";var Q={img:K};const a=q.exports.jsx,o=q.exports.jsxs;function b({id:n}){return a("img",{className:Q.img,src:n?`/black-jack/assets/img/cards/${n}.png`:"/black-jack/assets/img/backs/red.png",alt:"card"})}var z={suits:[{id:"s",name:"spades"},{id:"d",name:"diamonds"},{id:"c",name:"clubs"},{id:"h",name:"hearts"}],values:[{id:"a",name:"ace",value:11,secondaryValue:1},{id:"2",name:"2",value:2},{id:"3",name:"3",value:3},{id:"4",name:"4",value:4},{id:"5",name:"5",value:5},{id:"6",name:"6",value:6},{id:"7",name:"7",value:7},{id:"8",name:"8",value:8},{id:"9",name:"9",value:9},{id:"0",name:"10",value:10},{id:"j",name:"jack",value:10},{id:"q",name:"queen",value:10},{id:"k",name:"king",value:10}]},d,v;class U{constructor(e=1,t=void 0){$(this,d,[]);$(this,v,void 0);N(this,"draw",()=>m(this,d).shift());N(this,"shuffle",()=>{for(let e=m(this,d).length-1;e>0;e--){const t=m(this,v).int(0,e);[m(this,d)[e],m(this,d)[t]]=[m(this,d)[t],m(this,d)[e]]}});const i=z.suits.flatMap(r=>z.values.map(s=>({id:s.id+r.id,name:`${s.name}-${r.name}`,value:s.value,secondaryValue:s.secondaryValue})));for(let r=0;r<e;r++)m(this,d).push(...i);R(this,v,I.clone(void 0,t)),this.shuffle()}get size(){return m(this,d).length}get top(){return m(this,d)[0]}get cards(){return[...m(this,d)]}}d=new WeakMap,v=new WeakMap;function g(n){let e=n.reduce((t,i)=>t+i.value,0);return e>21&&n.filter(t=>t.secondaryValue!==void 0).forEach(t=>{e>21&&(e-=t.value-t.secondaryValue)}),e}async function h(n){return new Promise(e=>{setTimeout(e,n)})}function W(n,e,t){let i,r,s=null,c=0;t||(t={});const u=f=>{c=t.leading===!1?0:Date.now(),s=null,r=n.apply(i,f),s||(i=null)};return(...f)=>{const p=Date.now();!c&&t.leading===!1&&(c=p);const _=e-(p-c);return i=this,_<=0||_>e?(s&&(clearTimeout(s),s=null),c=p,r=n.apply(i,f),s||(i=null)):!s&&t.trailing!==!1&&(s=setTimeout(u,_)),r}}const X="_container_tb09g_1",Y="_title_tb09g_10";var P={container:X,title:Y};function Z({cards:n}){return o("div",{className:P.container,children:[o("h2",{className:P.title,children:["Croupier - ",g([n[0]||0]),"+"]}),a("div",{children:n.map((e,t)=>a(b,{id:t===0?e.id:void 0}))})]})}const C="_container_18qnh_1",ee="_title_18qnh_14";var L={container:C,title:ee};function te({cards:n}){return o("div",{className:L.container,children:[o("h2",{className:L.title,children:["Joueur - ",g(n)]}),a("div",{children:n.map(e=>a(b,{id:e.id}))})]})}const ne="_button_1ms0h_1",re="_shadow_1ms0h_11",se="_edge_1ms0h_24",ae="_front_1ms0h_40",ie="_large_1ms0h_54";var x={button:ne,shadow:re,edge:se,front:ae,large:ie};function k({children:n,onClick:e,size:t}){const[i,r]=l.exports.useState("1.25rem");return l.exports.useEffect(()=>{switch(t){case"large":r("2rem");break;case"small":r("0.75rem");break;default:r("1.25rem");break}},[t]),o("button",{onClick:e,className:x.button,type:"button",children:[a("span",{className:x.shadow}),a("span",{className:x.edge}),a("span",{className:x.front,style:{fontSize:i},children:n})]})}const ce="_container_1mny5_1",oe="_title_1mny5_13";var M={container:ce,title:oe};function le(){return o("div",{className:M.container,children:[a("h1",{className:M.title,children:"Black Jack"}),a(A,{tabIndex:-1,to:"/game",children:a(k,{size:"large",children:"Nouvelle Partie"})})]})}const ue="_container_zvzf6_1",de="_buttons_zvzf6_10";var D={container:ue,buttons:de};function fe({dealerCards:n,playerCards:e,addDealerCard:t,addPlayerCard:i,resetCards:r}){const s=G(),c=l.exports.useRef(new U(6)),u=l.exports.useRef(!1),[f,p]=l.exports.useState(!1),_=l.exports.useRef(W(async y=>{!u.current||(i(c.current.draw()),await h(500),g(y)<16&&t(c.current.draw()))},1e3,{trailing:!1})).current;l.exports.useEffect(()=>{f||(r(),(async()=>(await h(500),t(c.current.draw()),await h(500),i(c.current.draw()),await h(500),t(c.current.draw()),await h(500),i(c.current.draw()),u.current=!0))(),p(!0))},[t,i,f,r]),l.exports.useEffect(()=>{!f||(g(n)>=21||g(e)>=21)&&(async()=>(await h(500),s("/end")))()},[s,n,e,f]);const B=async()=>{if(!u.current)return;const y=[...n];for(;g(y)<16;){const E=c.current.draw();y.push(E),t(E),await h(500)}await h(500),s("/end")};return o("div",{className:D.container,children:[a(Z,{cards:n}),a(te,{cards:e}),o("div",{className:D.buttons,children:[a(k,{onClick:()=>_(n),children:"Piocher"}),a(k,{onClick:B,children:"S'arr\xEAter"})]})]})}const me="_container_tf9ky_1",he="_title_tf9ky_11",ge="_link_tf9ky_18",pe="_score_tf9ky_23";var w={container:me,title:he,link:ge,score:pe};function _e({dealerCards:n,playerCards:e}){const[t,i]=l.exports.useState(0),[r,s]=l.exports.useState(0);l.exports.useEffect(()=>{i(g(n)),s(g(e))},[n,e]);const c=()=>r>21?"Perdu":t>21?"Gagn\xE9":r===t?"\xC9galit\xE9":r>t?"Gagn\xE9":"Perdu";return o("div",{className:w.container,children:[o("h1",{className:w.title,children:[c()," !"]}),o("div",{className:w.score,children:[o("div",{children:[o("h2",{style:{textAlign:"center"},children:["Croupier - ",t]}),a("div",{children:n.map(u=>a(b,{id:u.id}))})]}),o("div",{children:[o("h2",{style:{textAlign:"center"},children:["Joueur - ",r]}),a("div",{children:e.map(u=>a(b,{id:u.id}))})]})]}),a(A,{tabIndex:-1,className:w.link,to:"/game",children:a(k,{size:"large",children:"R\xE9essayer"})})]})}function ve(){const[n,e]=l.exports.useState([]),[t,i]=l.exports.useState([]);return o(J,{children:[a(S,{path:"/",element:a(le,{})}),a(S,{path:"/game",element:a(fe,{dealerCards:n,playerCards:t,addDealerCard:u=>{e(f=>[...f,u])},addPlayerCard:u=>{i(f=>[...f,u])},resetCards:()=>{e([]),i([])}})}),a(S,{path:"/end",element:a(_e,{dealerCards:n,playerCards:t})})]})}T.render(a(l.exports.StrictMode,{children:a(F,{basename:"/black-jack/",children:a(ve,{})})}),document.getElementById("root"));
