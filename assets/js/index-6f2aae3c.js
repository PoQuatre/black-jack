var O=Object.defineProperty;var V=(t,e,n)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var k=(t,e,n)=>(V(t,typeof e!="symbol"?e+"":e,n),n),S=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var d=(t,e,n)=>(S(t,e,"read from private field"),n?n.call(t):e.get(t)),w=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},E=(t,e,n,i)=>(S(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);import{j as M,r as D,a as m,L as q,u as I,R as G,b,c as J,B as F}from"./vendor-b9676509.js";const H=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};H();const K="_img_o1udw_1";var T={img:K};const s=M.exports.jsx,c=M.exports.jsxs;function y({id:t}){return s("img",{className:T.img,src:t?`/black-jack/assets/img/cards/${t}.png`:"/black-jack/assets/img/backs/red.png",alt:"card"})}var j={suits:[{id:"s",name:"spades"},{id:"d",name:"diamonds"},{id:"c",name:"clubs"},{id:"h",name:"hearts"}],values:[{id:"a",name:"ace",value:11,secondaryValue:1},{id:"2",name:"2",value:2},{id:"3",name:"3",value:3},{id:"4",name:"4",value:4},{id:"5",name:"5",value:5},{id:"6",name:"6",value:6},{id:"7",name:"7",value:7},{id:"8",name:"8",value:8},{id:"9",name:"9",value:9},{id:"0",name:"10",value:10},{id:"j",name:"jack",value:10},{id:"q",name:"queen",value:10},{id:"k",name:"king",value:10}]},l,g;class Q{constructor(e=1,n=void 0){w(this,l,[]);w(this,g,void 0);k(this,"draw",()=>d(this,l).shift());k(this,"shuffle",()=>{for(let e=d(this,l).length-1;e>0;e--){const n=d(this,g).int(0,e);[d(this,l)[e],d(this,l)[n]]=[d(this,l)[n],d(this,l)[e]]}});const i=j.suits.flatMap(r=>j.values.map(a=>({id:a.id+r.id,name:`${a.name}-${r.name}`,value:a.value,secondaryValue:a.secondaryValue})));for(let r=0;r<e;r++)d(this,l).push(...i);E(this,g,D.clone(void 0,n)),this.shuffle()}get size(){return d(this,l).length}get top(){return d(this,l)[0]}get cards(){return[...d(this,l)]}}l=new WeakMap,g=new WeakMap;function f(t){let e=t.reduce((n,i)=>n+i.value,0);return e>21&&t.filter(n=>n.secondaryValue!==void 0).forEach(n=>{e>21&&(e-=n.value-n.secondaryValue)}),e}async function h(t){return new Promise(e=>{setTimeout(e,t)})}const U="_container_tb09g_1",W="_title_tb09g_10";var z={container:U,title:W};function X({cards:t}){return c("div",{className:z.container,children:[c("h2",{className:z.title,children:["Croupier - ",f([t[0]||0]),"+"]}),s("div",{children:t.map((e,n)=>s(y,{id:n===0?e.id:void 0}))})]})}const Y="_container_18qnh_1",Z="_title_18qnh_14";var P={container:Y,title:Z};function C({cards:t}){return c("div",{className:P.container,children:[c("h2",{className:P.title,children:["Joueur - ",f(t)]}),s("div",{children:t.map(e=>s(y,{id:e.id}))})]})}const ee="_button_1ms0h_1",te="_shadow_1ms0h_11",ne="_edge_1ms0h_24",re="_front_1ms0h_40",se="_large_1ms0h_54";var p={button:ee,shadow:te,edge:ne,front:re,large:se};function x({children:t,onClick:e,size:n}){const[i,r]=m.exports.useState("1.25rem");return m.exports.useEffect(()=>{switch(n){case"large":r("2rem");break;case"small":r("0.75rem");break;default:r("1.25rem");break}},[n]),c("button",{onClick:e,className:p.button,type:"button",children:[s("span",{className:p.shadow}),s("span",{className:p.edge}),s("span",{className:p.front,style:{fontSize:i},children:t})]})}const ae="_container_1mny5_1",ie="_title_1mny5_13";var R={container:ae,title:ie};function ce(){return c("div",{className:R.container,children:[s("h1",{className:R.title,children:"Black Jack"}),s(q,{tabIndex:-1,to:"/game",children:s(x,{size:"large",children:"Nouvelle Partie"})})]})}const oe="_container_zvzf6_1",le="_buttons_zvzf6_10";var L={container:oe,buttons:le};function ue({dealerCards:t,playerCards:e,addDealerCard:n,addPlayerCard:i,resetCards:r}){const a=I(),o=m.exports.useRef(new Q(6)),[u,_]=m.exports.useState(!1);m.exports.useEffect(()=>{u||(r(),(async()=>(await h(500),n(o.current.draw()),await h(500),i(o.current.draw()),await h(500),n(o.current.draw()),await h(500),i(o.current.draw())))(),_(!0))},[n,i,u,r]),m.exports.useEffect(()=>{!u||(f(t)>=21||f(e)>=21)&&(async()=>(await h(500),a("/end")))()},[a,t,e,u]);const A=async()=>{i(o.current.draw()),await h(500),f(t)<16&&n(o.current.draw())},B=async()=>{const N=[...t];for(;f(N)<16;){const $=o.current.draw();N.push($),n($),await h(500)}await h(500),a("/end")};return c("div",{className:L.container,children:[s(X,{cards:t}),s(C,{cards:e}),c("div",{className:L.buttons,children:[s(x,{onClick:A,children:"Piocher"}),s(x,{onClick:B,children:"S'arr\xEAter"})]})]})}const de="_container_tf9ky_1",me="_title_tf9ky_11",he="_link_tf9ky_18",fe="_score_tf9ky_23";var v={container:de,title:me,link:he,score:fe};function _e({dealerCards:t,playerCards:e}){const[n,i]=m.exports.useState(0),[r,a]=m.exports.useState(0);m.exports.useEffect(()=>{i(f(t)),a(f(e))},[t,e]);const o=()=>r>21?n>21?"\xC9galit\xE9":"Perdu":n>21?"Gagn\xE9":r===n?"\xC9galit\xE9":r>n?"Gagn\xE9":"Perdu";return c("div",{className:v.container,children:[c("h1",{className:v.title,children:[o()," !"]}),c("div",{className:v.score,children:[c("div",{children:[c("h2",{style:{textAlign:"center"},children:["Croupier - ",n]}),s("div",{children:t.map(u=>s(y,{id:u.id}))})]}),c("div",{children:[c("h2",{style:{textAlign:"center"},children:["Joueur - ",r]}),s("div",{children:e.map(u=>s(y,{id:u.id}))})]})]}),s(q,{tabIndex:-1,className:v.link,to:"/game",children:s(x,{size:"large",children:"R\xE9essayer"})})]})}function ge(){const[t,e]=m.exports.useState([]),[n,i]=m.exports.useState([]);return c(G,{children:[s(b,{path:"/",element:s(ce,{})}),s(b,{path:"/game",element:s(ue,{dealerCards:t,playerCards:n,addDealerCard:u=>{e(_=>[..._,u])},addPlayerCard:u=>{i(_=>[..._,u])},resetCards:()=>{e([]),i([])}})}),s(b,{path:"/end",element:s(_e,{dealerCards:t,playerCards:n})})]})}J.render(s(m.exports.StrictMode,{children:s(F,{basename:"/black-jack/",children:s(ge,{})})}),document.getElementById("root"));
